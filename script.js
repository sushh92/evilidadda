// Sample product data
const products = [
    {
        id: 1,
        name: "PREMIUM BGMI ACCOUNT WITH RAVEN X-SUIT MAX & MCLAREN SPAWN",
        price: 29.99,
        images: [
            "./assets/images.jpg",
            "./assets/images1.jpg",
        ],
        video: "./assets/video.MP4",
        description: `ðŸ‡®ðŸ‡³ BGMI PREMIUM ACCOUNT RAVEN X-SUIT MAX + M416 GLACIER MAX + AKM GHILLIE DRAGON COMBO + 12 PRIMARY KILL-FEED + MCLAREN SPAWN + 4 SUPER CARS + WRATHFUL NEPTUNE SET + TOTAL MYTHIC 89/300 + RP SUPPORTER TITLE + OP ACCOUNT ðŸ¤

â–«ï¸ACCOUNT LEVEL 71/100
â–«ï¸BEARD & PONY UNLOCKED
â–«ï¸RANVEER SINGH MYTHIC VOICEPACK 
â–«ï¸PIERCING FANG HELMET
â–«ï¸BUNNY MASK
â–«ï¸MYTHIC FASHION : [89/300] 
â–«ï¸ROYALPASS SUPPOTER TITLE [RARE]
â–«ï¸GODZILLA & FALCON PET OPEN

ðŸ’« BLOOD RAVEN X-SUIT MAX [LEVEL-6] ðŸ’«
â€¢ ITEMS UNLOCK â€¢  
[FRAME, BAG, ORNA, PARACHUTE]

ðŸ’« POSIDEN X-SUIT LEVEL-2 ðŸ’«
â€¢ ITEMS UNLOCK â€¢  
[FRAME, BAG, ORNA, PARACHUTE]

#GUNLAB 
ðŸ”«M416 GLACIER LEVEL 7 MAX
ðŸ”«M762 CONCERTO OF LOVE LEVEL 5
ðŸ”«AKM GHILLIE DRAGON LEVEL 4
ðŸ”«SCARL DROP THE BASS LEVEL 4
ðŸ”«M16A4 RADIANT LEVEL 4
ðŸ”«AWM GODZILLA LEVEL 4
ðŸ”«PP BIZON LEVEL 4
ðŸ”«QBZ DAZZLING SUN LEVEL 4 
ðŸ”«DP JADE DRAGON LEVEL 5 MAX
ðŸ”«LADY BUTTERFLY M24 LEVEL 5 MAX
ðŸ”«WINTER QUEEN M249 LEVEL 5 MAX
ðŸ”«UZI SPIRIT SENTRY LVL 4
ðŸ”«MACHETE DRAKONBANE LVL 4
ðŸ”«AUG ABYSAAL HOWL LEVEL 2 
ðŸ”«AKM CODE BREAKER LEVEL 1
ðŸ”«LADY CRIME SKS LVL 1 
ðŸ”«KNIGHT DAGGER LVL 1 
ðŸ”«GLACIER PAN
ðŸ’¥GRENADE KILL MSG
ðŸ”«1 GUN MATERIAL 

#OUTFITS
ðŸ‘—WRATHFUL NEPTUNE SET [ULTIMATE SET]
ðŸ‘—SPECTRAL ADMIRAL SET [ULTIMATE SET]
ðŸ‘—QUEEN OF RICHES SET
ðŸ‘—GODZILLA CARAPACE
ðŸ‘—SEA SERPENT SET
ðŸ‘—THE SEVEN SEAS SET
ðŸ‘—DARK ASSASSIN SET
ðŸ‘—APEACH SET
ðŸ‘—REGAL OVERLOAD SET 
ðŸ‘—OBSIDIAN EAGLE SET 
ðŸ‘—GODZILLA SUIT
ðŸ‘—RYAN SET
ðŸ‘—DAWN GODDESS SET
ðŸ‘—ROUGE SET 
ðŸ‘—VICTIRIAN MAIDEN SET
ðŸ‘—LUCKY MASCOT SET
ðŸ‘—DAYMAN SET
ðŸ‘—BEWITCHING ENCHANTRESS SET
ðŸ‘—LORD OF THE WASTES SET
ðŸ‘—VI SUIT
ðŸ‘—JAYCE SUIT

#SUPER_CARS 
ðŸŽï¸MCLAREN (ROYAL BLACK) [BORN ISLAND DROP CAR]
ðŸŽï¸PINK TESLA ROADSTER 
ðŸŽï¸LAMBORGHINI AVENTADOR SVJ 
ðŸŽï¸TESLA CYBER TRUCK 
ðŸš˜AEGIS LVL 8 MAX
ðŸš˜NIGHT EMBER 2 SEAT MOTORCYCLE 
ðŸš˜PHANTOM MOTORCYCLE LEVEL 3

ðŸ”ºHELMET & BACKPACK ðŸŽ’ 
â›‘ï¸PIERCING FANG HELMET 
ðŸŽ’RAVEN BACKPACK 
ðŸŽ’GHOSTLY SNARE BACKPACK 
ðŸŽ’VAMPIRIC COMPULSION BACKPACK 
â–«ï¸SPECTRAL ADMIRAL COVER 
â–«ï¸REAPER AND COVER 

WATCH VIDEO FOR MORE INFO ðŸ“¸ 

ðŸ§·LOGIN - TWITTER + GMAIL`
    },
    {
        id: 2,
        name: "PREMIUM PHAROH MAX WITH FOOL MAX WITH SUPER CARS",
        price: 39.99,
        images: [
            "./assets/images2.jpg",
            "./assets/images3.jpg"
        ],
        video: "./assets/video2.MP4",
        description: `ðŸ‡®ðŸ‡³ BGMI PREMIUM PHAROH MAX WITH FOOL MAX & TIDAL MAX WITH SUPERCAR SHOWROOM AND INVENTORY ACCOUNT ðŸ‡®ðŸ‡³

â–«ï¸ACCOUNT LEVEL 76/100 [ HIGH ]
â–«ï¸MYTHIC FASHION 110/300
â–«ï¸COLLECTION LEVEL 65/95 [ HIGH ]
â–«ï¸ULTIMATE FASHION 3/5
â–«ï¸S5 PONY UNLOCKED
â–«ï¸ALL PROFILE SLOTS UNLOCKED
â–«ï¸C4S11 CONQUEROR [ F/T ]
â–«ï¸DYNAMO MYTHIC VOICE
â–«ï¸3X BASIC VOICE

ðŸ’¥SEABED PALACE MYTHIC LOBBY [ ANIMATED ]
ðŸ’¥POSEIDON TRIDENT MYTHIC LOBBY

ðŸ”¥12M+ RED POPULARITY [ MYTHIC ]
    [ #1000 in total ranking ]

ðŸ’«PHARAOH X-SUIT LEVEL - 6 MAXX
                 â€¢ ITEMS UNLOCK â€¢  
       [FRAME, BAG, ORNA, PARACHUTE]

ðŸ’«MARMORIS X-SUIT LEVEL - 4
                 â€¢ ITEMS UNLOCK â€¢  
       [FRAME, BAG, ORNA, PARACHUTE]

ðŸ’«GALADRIA X-SUIT LEVEL - 2
                 â€¢ ITEMS UNLOCK â€¢  
       [FRAME, BAG, ORNA, PARACHUTE]

#GUNLAB
ðŸ”«M416 EMBRACE TIDAL LEVEL 7 MAX
ðŸ”«M416 FOOL LEVEL 7 MAX
ðŸ”«AKM DESERT FOSSIL LEVEL 4
ðŸ”«UMP45 - EMP LEVEL 4
ðŸ”«AUG FORSAKEN GLACE LEVEL 4
ðŸ”«GROZA PRIMORDIAL LEVEL 4
ðŸ”«UZI ETH EMBLEM LEVEL 4
ðŸ”«M24 PHARAOH MIGHT LEVEL 4
ðŸ”«PAN ACCOLADE LEVEL 4
ðŸ”«UMP PLAT RIPPER LEVEL 4
ðŸ”«SLR SEA MELODY LEVEL 4
ðŸ”«M24 LADY BUTTERFLY LEVEL 4
ðŸ”«UMP EVOLUTION LEVEL 4
ðŸ”«MACHETE BONE LEVEL 4
ðŸ”«GLAZE NADE KILL MSG
ðŸ”«FORSAKEN MOLLY KILL MSG
ðŸ”«LUMINA MOLLY KILL MSG
ðŸ”«SCARL SERENE LUMINA LEVEL 2
ðŸ”«ACE32 MYSTIC KRAKEN LEVEL 1
ðŸ”«M24 INDUSTRY EDGE LEVEL 1
ðŸ”«MG3 SKY HUNTRESS LEVEL 1
ðŸ”«MINI14 ICICLE LEVEL 1
ðŸ”«EXTRA MATERIALS + PAINTS

#MYTHIC_OUTFITS
ðŸ‘—STARSEA ADMIRAL FULL SET [ ULTIMATE ]
ðŸ‘—SPECTRAL ADMIRAL COVER [ ULTIMATE ]
ðŸ‘—DYSTOPIAN SET [ RAREST ]
ðŸ‘—WEDDING TUXEDO [ RARE ]
ðŸ‘—KILLING MACHINE SET [ RARE ]
ðŸ‘—SEA SERPENT SET [ RARE ]
ðŸ‘—REGAL OVERLOAD SET [ RARE ]
ðŸ‘—WINTER GUARDIAN SET [ RARE ]
ðŸ‘—CYBER MONKEY SET [ RARE ]
ðŸ‘—FALLEN SPIRIT SET [ RARE ]
ðŸ‘—GALACTIC MARSHAL SET [ RARE ]
ðŸ‘—QUICKSAND DOMINTOR SET [ RARE ]
ðŸ‘—SKY EXPLORER SET [ RARE ]
ðŸ‘—RIPPLING CHARM SET [ RARE ]
ðŸ‘—THE FOOL SET [ RARE ]
ðŸ‘—WARRIOR OF RA SET [ RARE ]
ðŸ‘—WARRIOR OF NUT SET [ RARE ]
ðŸ‘—BLUE PILOT SET [ RARE ]
ðŸ‘—SWIFT LEOPARD SET [ RARE ]
ðŸ‘—WAVE WHISPERER SET
ðŸ‘—PINK BIKINI SET
ðŸ‘—MILKMAID SET
ðŸ‘—NIGHT MAIDEN SET
ðŸ‘—JINX, VI & JAYCE SET
ðŸ‘—THE SEVEN SEAS SET
ðŸ‘—NINJA KITTY SET
ðŸ‘—MEGUMI FUSHIGURO SET
ðŸ‘—CRYSTAL BANDIT SET
ðŸ‘—NOBARA KUGISAKI SET
ðŸ‘—PURPLE HALO SET

#HELMET_AND_BACKPACKS
â›‘ï¸GALADRIA HELMET [ MYTHIC ]
â›‘ï¸RIPPLING CHARM HELMET [ RARE ]
ðŸŽ’PHARAOH BAG [ MYTHIC ]
ðŸŽ’BLING BAG [ MYTHIC ]
ðŸŽ’FOOL BAG [ RARE ]
ðŸŽ’GALADRIA & MARMORIS BAG [ MYTHIC ]
ðŸŽ’ANGEL WINGS BAG

#SUPERCARS_VEHICLES
ðŸŽï¸BUGATTI LA VOITURE NOIRE (ALLOY)
ðŸŽï¸LAMBORGHINI ESTOQUE METAL GREY DACIA
ðŸŽï¸LAMBORGHINI URUS GIALLO INTI UAZ
ðŸŽï¸LOVERS GRACE MYTHIC BUGGY [ ANIMATED ]
ðŸŽï¸SERENE LUMINA DACIA [ MYTHIC ]
ðŸŽï¸SEA WRATH MONSTER TRUCK LEVEL - 1
ðŸŽï¸FLORAL RED DACIA [ RARE ]
ðŸŽï¸WHITE DRAGON UAZ
ðŸŽï¸PMGC 2021 UAZ
ðŸŽï¸GLACIAL BRIDE BIKE

ðŸ§·LOGIN - TWITTER/GMAIL`
    },
    {
        id: 3,
        name: "PREMIUM BGMI ACCOUNT WITH SILVANUS XSUIT & BENTLEY SHOWROOM",
        price: 49.99,
        images: [
            "./assets/images1.jpg",
            "./assets/images2.jpg"
        ],
        video: "./assets/video3.MP4",
        description: `â¤â€ðŸ”¥ BGMI PREMIUM ACCOUNT 2 XSUITS + SILVANUS XSUIT LVL 4 + M416 GLACIER MAX + UMP GLACIER COMBO + 22 UPGRADEABLE + BENTLEY SHOWROOM + 4 SUPERCARS â¤â€ðŸ”¥

â–«ï¸ ID LVL - 70 HIGH 
â–«ï¸ ALL VEHICLE SLOT OPEN
â–«ï¸ SHER,KITTY,DOOGY & FALCON BUDDY
â–«ï¸ RANVEER BASIC VOICEPACK 
â–«ï¸ GOLDY,SMR,REGA BASIC VOICEPACK 
â–«ï¸ BULMA MYTHIC VOICEPACK

ðŸ’« SILVANUS XSUIT LVL 4 
ðŸ’« IGNIS XSUIT LVL 1 

#RP_MYTHIC 
ðŸ’“ A1 TO A7 RP MAX SHOWROOM
ðŸ’“ TOTAL MYTHIC 46/50

#GUNLAB
ðŸ”«M416 GLACIER MAX 
ðŸ”«AKM DECISIVE LVL 5 
ðŸ”«LUMINOUS M762 LVL 4 
ðŸ”«UMP GLACIER LVL 4
ðŸ”«SERPENGLEM AWM LVL 4 
ðŸ”«ETHERNAL UMP LVL 4 
ðŸ”«CRIMSON SCARL LVL 4
ðŸ”«VIOLET THOMSAN LVL 4 
ðŸ”«KITTY KAR98 LVL 4 
ðŸ”«PANTHERE DBS LVL 4
ðŸ”«UMP MARINE LVL 4
ðŸ”«SPYFAMILY STILLETOS LVL 2
ðŸ”«BUNNY AKM LVL 1 
ðŸ”«DHAMAKEDAAR DP28 LVL 1
ðŸ”«NIGHTSCAPE PPBIZON LVL 1
ðŸ”«ORIGIN LUMEN FAMAS LVL 1
ðŸ”«SCORCHING AMR LVL 1 
ðŸ”«LUSTER PAN LVL 1
ðŸ”«SHEHRON DP28 LVL 1 
ðŸ”«CROSSBOW LVL 1 
ðŸ”«MACHEYE LVL 1 
ðŸ”«LADY CARMINE SKS LVL 1 
â–«ï¸1 MATERIAL 
â–«ï¸7 GRENADES

#OUTFIT 
ðŸ‘šGLACIER SET 
ðŸ‘šCYCLE 4/5/6 SET 
ðŸ‘šRS DARK STEALTH 
ðŸ‘šSWAGGY BABA SET 
ðŸ‘šDRAGON EMPEROR SET
ðŸ‘šSPYFAMILY TWLIGHT SET 
ðŸ‘šSUAVE ROYAL SET 
ðŸ‘šFELINE FRIGHTER SET 
ðŸ‘šTHE MUMBAIKAR SET
ðŸ‘šFLOWER MAESTRO SET 
ðŸ‘šSWEET BUNNY SET 
ðŸ‘šFOREST WHISPER SET 
ðŸ‘šS2 WANDERER SET & MANY MORE 

#CHARACTERS 
ðŸ’‚VICTOR 

#SUPERCAR 
ðŸš—BENTLEY FLYING SPUR MULLINER 
âœ¨[DAMSON OVER SILVER]âœ¨
ðŸš—BENTLEY CONTINENTAL MULLINER
âœ¨[TANZANITE PURPLE]âœ¨
ðŸš—BENTLEY BATUR 
âœ¨[BONNEVILLA PEARLSCENT]âœ¨
ðŸš—SSC TUATRA SKY CRANE 
âœ¨[WHITE]âœ¨

ðŸ”ºHELMET,BAGPACK & EXTRAðŸ”º
ðŸŒŸSERPENGLEM BAGPACK 
ðŸŒŸCRIMSON NEMESIS BAGPACK 
ðŸŒŸPOSIDION PARACHUTE
ðŸŒŸFRIGHT NIGHT HOOD

REST CHECK VIDEO ðŸŽ¥

ðŸ”LOGIN - FB & TWITTER`
    },
    {
        id: 4,
        name: "GLACIER MAX WITH AKM DESERT LEVEL 4 WITH DOUBLE SUPERCARS",
        price: 59.99,
        images: [
            "./assets/image5.jpg",
            "./assets/image6.jpg"
        ],
        video: "./assets/video4.MP4",
        description: `ðŸ‡®ðŸ‡³ BGMI PREMIUM ACCOUNT M416 GLACIER MAX + AKM DESERT LVL 4 + 5 PRIMARY KILL-FEED + DOUBLE SUPER CAR + DOUBLE CONQUER + OP INVENTORY ðŸ¤ 

â–«ï¸ACCOUNT LVL 81/100
â–«ï¸C2S4 & C3S7 CONQUER 
â–«ï¸GOLDY BASIC VOICE PACK 
â–«ï¸2 CAR SLOT OPEN 
â–«ï¸FALCON OPEN 

#UPGRADEBLE 
ðŸ”« M416 GLACIER MAX 
ðŸ”« AKM DESERT FOSSIL LVL 4 
ðŸ”« SCAR-L OPERATION LVL 4 
ðŸ”« UMP CARNIVAL LVL 4 
ðŸ”« KAR-98  KULKULKAN LVL 4
ðŸ”« UMP MARINE LVL 2 
ðŸ”« M762 STRAY REBELLION LVL 2 ðŸ’¥ 2 MATERIAL AVAILABLE 
ðŸ’¥ 56 PAINTS AVAILABLE

#OUTFITS
ðŸ‘— FIEND HUNTRESS SET 
ðŸ‘— CYCLE 2 SET 
ðŸ‘— CONTENDER SET 
ðŸ‘— CARNIVAL CELEBRATION SET 
ðŸ‘— CYCLE 4 SET 
ðŸ‘— MONEY BUSINESS SET 
ðŸ‘— CYCLE 5 SET 
ðŸ‘— OPERATION LEO SET 
ðŸ‘— CYCLE 7 SET
ðŸ‘— BLACK COMMANDER SET

#SUPER_CARS 
ðŸŽï¸ LAMBORGHINI SVJ VERDE
(GREEN COUPE) 
ðŸŽï¸ LAMBORGHINI URUS GIALLO 
(YELLOW UAZ )

ðŸ”º HELMET & BACKPACK ðŸ”º
â›‘ï¸ PUBLING MYTHIC HELMET 
â›‘ï¸ MAX DRIP HELMET 
ðŸŽ’ SAILING APE BACKPACK 
ðŸŽ’ CARDINAL RAIN BACKPACK

WATCH VIDEO FOR MORE INFO  ðŸ“¸ 

ðŸ§· LOGIN - TWITTER/GMAIL`
    }
];

// DOM Elements
const productsContainer = document.getElementById('products-container');

// Display products
function displayProducts() {
    const container = document.getElementById('products-container');
    container.innerHTML = '';
    
    products.forEach(product => {
        const card = document.createElement('div');
        card.className = 'product-card';
        
        // Image gallery
        const gallery = document.createElement('div');
        gallery.className = 'image-gallery';
        
        // Main image
        const mainImage = document.createElement('div');
        mainImage.className = 'main-image';
        
        if (product.video) {
            const video = document.createElement('video');
            video.className = 'product-video';
            video.controls = true;
            video.preload = 'metadata';
            video.playsInline = true;
            
            const source = document.createElement('source');
            source.src = product.video;
            source.type = 'video/mp4';
            
            video.appendChild(source);
            mainImage.appendChild(video);
        } else {
            const img = document.createElement('img');
            img.src = product.images[0];
            img.alt = product.name;
            img.className = 'product-image';
            img.onclick = () => showImagePopup(img.src);
            mainImage.appendChild(img);
        }
        
        // Thumbnails
        const thumbnails = document.createElement('div');
        thumbnails.className = 'thumbnail-container';
        
        product.images.forEach((imgSrc, index) => {
            const thumb = document.createElement('img');
            thumb.src = imgSrc;
            thumb.alt = product.name + ' view ' + (index + 1);
            thumb.className = 'thumbnail' + (index === 0 ? ' active' : '');
            thumb.onclick = () => {
                changeMainImage(thumb, imgSrc);
                showImagePopup(imgSrc); // Show popup when thumbnail is clicked
            };
            thumbnails.appendChild(thumb);
        });
        
        gallery.appendChild(mainImage);
        gallery.appendChild(thumbnails);
        
        // Product info
        const info = document.createElement('div');
        info.className = 'product-info';
        
        // Title
        const title = document.createElement('h3');
        title.className = 'product-title';
        title.textContent = product.name;
        
        // Price
        const price = document.createElement('p');
        price.className = 'product-price';
        price.textContent = 'â‚¹' + product.price.toFixed(2);
        
        // Description
        const description = document.createElement('div');
        description.className = 'product-description';
        description.innerHTML = product.description.replace(/\n/g, '<br>');
        
        // WhatsApp link
        const whatsappLink = document.createElement('a');
        whatsappLink.href = 'https://wa.me/919667213967?text=' + encodeURIComponent('Hi, I\'m interested in ' + product.name + ' (â‚¹' + product.price.toFixed(2) + '). Please provide more details.');
        whatsappLink.className = 'whatsapp-link';
        whatsappLink.target = '_blank';
        whatsappLink.rel = 'noopener noreferrer';
        whatsappLink.innerHTML = '<i class="fab fa-whatsapp"></i> Contact on WhatsApp';
        
        // Telegram link
        const telegramLink = document.createElement('a');
        telegramLink.href = 'https://t.me/evilpaanda';
        telegramLink.className = 'telegram-link';
        telegramLink.target = '_blank';
        telegramLink.rel = 'noopener noreferrer';
        telegramLink.innerHTML = '<i class="fab fa-telegram"></i> Contact on Telegram';
        
        info.appendChild(title);
        info.appendChild(price);
        info.appendChild(description);
        info.appendChild(whatsappLink);
        info.appendChild(telegramLink);
        
        card.appendChild(gallery);
        card.appendChild(info);
        container.appendChild(card);
    });
}

// Function to change main image
function changeMainImage(thumbnail, newSrc) {
    const mainImage = thumbnail.parentElement.previousElementSibling.querySelector('img');
    if (mainImage) {
        mainImage.src = newSrc;
        mainImage.onclick = () => showImagePopup(newSrc); // Add click handler to new main image
    }
    
    // Update active thumbnail
    thumbnail.parentElement.querySelectorAll('.thumbnail').forEach(thumb => {
        thumb.classList.remove('active');
    });
    thumbnail.classList.add('active');
}

// Function to show image popup
function showImagePopup(imageSrc) {
    const modal = document.createElement('div');
    modal.className = 'image-popup-modal';
    
    const closeBtn = document.createElement('span');
    closeBtn.className = 'image-popup-close';
    closeBtn.innerHTML = '&times;';
    closeBtn.onclick = () => modal.remove();
    
    const img = document.createElement('img');
    img.src = imageSrc;
    img.className = 'image-popup-content';
    
    modal.appendChild(closeBtn);
    modal.appendChild(img);
    
    modal.onclick = (e) => {
        if (e.target === modal) {
            modal.remove();
        }
    };
    
    document.body.appendChild(modal);
    modal.style.display = 'block';
}

// Initialize the page
displayProducts();

// Search functionality
const searchInput = document.getElementById('searchInput');
const searchButton = document.querySelector('.search-button');

function filterProducts(searchTerm) {
    const filteredProducts = products.filter(product => {
        const searchString = searchTerm.toLowerCase();
        
        // Check if the search term contains a price range
        const priceRangeMatch = searchString.match(/(\d+)\s*-\s*(\d+)/);
        if (priceRangeMatch) {
            const minPrice = parseFloat(priceRangeMatch[1]);
            const maxPrice = parseFloat(priceRangeMatch[2]);
            return product.price >= minPrice && product.price <= maxPrice;
        }
        
        // Check if the search term contains "under" or "below" with a price
        const underPriceMatch = searchString.match(/(?:under|below)\s*(\d+)/);
        if (underPriceMatch) {
            const maxPrice = parseFloat(underPriceMatch[1]);
            return product.price <= maxPrice;
        }
        
        // Check if the search term contains "over" or "above" with a price
        const overPriceMatch = searchString.match(/(?:over|above)\s*(\d+)/);
        if (overPriceMatch) {
            const minPrice = parseFloat(overPriceMatch[1]);
            return product.price >= minPrice;
        }
        
        // Regular search for text
        return (
            product.name.toLowerCase().includes(searchString) ||
            product.description.toLowerCase().includes(searchString) ||
            product.price.toString().includes(searchString)
        );
    });
    
    displayFilteredProducts(filteredProducts);
}

function displayFilteredProducts(filteredProducts) {
    if (filteredProducts.length === 0) {
        productsContainer.innerHTML = `
            <div class="no-results">
                <h2>No products found</h2>
                <p>Try different keywords or check out all our products</p>
            </div>
        `;
        return;
    }

    productsContainer.innerHTML = filteredProducts.map(product => `
        <div class="product-card">
            ${product.images ? `
                <div class="image-gallery">
                    <div class="main-image">
                        ${product.video ? `
                            <video class="product-video" controls preload="metadata" playsinline>
                                <source src="${product.video}" type="video/mp4">
                                Your browser does not support the video tag.
                            </video>
                        ` : `
                            <img src="${product.images[0]}" alt="${product.name}" class="product-image">
                        `}
                    </div>
                    <div class="thumbnail-container">
                        ${product.images.map((img, index) => `
                            <img src="${img}" alt="${product.name} view ${index + 1}" 
                                 class="thumbnail ${index === 0 ? 'active' : ''}"
                                 onclick="changeMainImage(this, '${img}')">
                        `).join('')}
                    </div>
                </div>
            ` : `
                <img src="${product.image}" alt="${product.name}" class="product-image">
            `}
            <div class="product-info">
                <h3 class="product-title">${product.name}</h3>
                <p class="product-price">â‚¹${product.price.toFixed(2)}</p>
                <div class="product-description">
                    ${product.description.replace(/\n/g, '<br>')}
                </div>
                <a href="https://wa.me/919667213967?text=${encodeURIComponent(`Hi, I'm interested in ${product.name} (â‚¹${product.price.toFixed(2)}). Please provide more details.`)}" 
                   class="whatsapp-link" 
                   target="_blank"
                   rel="noopener noreferrer">
                    <i class="fab fa-whatsapp"></i> Contact on WhatsApp
                </a>
                <a href="https://t.me/evilpaanda" 
                   class="telegram-link" 
                   target="_blank"
                   rel="noopener noreferrer">
                    <i class="fab fa-telegram"></i> Contact on Telegram
                </a>
            </div>
        </div>
    `).join('');
}

// Search event listeners
searchButton.addEventListener('click', () => {
    filterProducts(searchInput.value);
});

searchInput.addEventListener('keypress', (e) => {
    if (e.key === 'Enter') {
        filterProducts(searchInput.value);
    }
});

// Real-time search as user types
searchInput.addEventListener('input', () => {
    filterProducts(searchInput.value);
});

// Update the search input placeholder to show price range examples
searchInput.placeholder = "Search products... (e.g., 'under 30', '20-40', 'over 50')";

// Add click event listeners to all product images
document.addEventListener('click', (e) => {
    if (e.target.classList.contains('product-image')) {
        showImagePopup(e.target.src);
    }
}); 