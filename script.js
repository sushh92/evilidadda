// Sample product data
const products = [
    {
        id: 1,
        name: "PREMIUM BGMI ACCOUNT WITH RAVEN X-SUIT MAX & MCLAREN SPAWN",
        price: 29.99,
        images: [
            "./assets/images.jpg",
            "./assets/images1.jpg",
        ],
        video: "./assets/video.MP4",
        description: `🇮🇳 BGMI PREMIUM ACCOUNT RAVEN X-SUIT MAX + M416 GLACIER MAX + AKM GHILLIE DRAGON COMBO + 12 PRIMARY KILL-FEED + MCLAREN SPAWN + 4 SUPER CARS + WRATHFUL NEPTUNE SET + TOTAL MYTHIC 89/300 + RP SUPPORTER TITLE + OP ACCOUNT 🤍

▫️ACCOUNT LEVEL 71/100
▫️BEARD & PONY UNLOCKED
▫️RANVEER SINGH MYTHIC VOICEPACK 
▫️PIERCING FANG HELMET
▫️BUNNY MASK
▫️MYTHIC FASHION : [89/300] 
▫️ROYALPASS SUPPOTER TITLE [RARE]
▫️GODZILLA & FALCON PET OPEN

💫 BLOOD RAVEN X-SUIT MAX [LEVEL-6] 💫
• ITEMS UNLOCK •  
[FRAME, BAG, ORNA, PARACHUTE]

💫 POSIDEN X-SUIT LEVEL-2 💫
• ITEMS UNLOCK •  
[FRAME, BAG, ORNA, PARACHUTE]

#GUNLAB 
🔫M416 GLACIER LEVEL 7 MAX
🔫M762 CONCERTO OF LOVE LEVEL 5
🔫AKM GHILLIE DRAGON LEVEL 4
🔫SCARL DROP THE BASS LEVEL 4
🔫M16A4 RADIANT LEVEL 4
🔫AWM GODZILLA LEVEL 4
🔫PP BIZON LEVEL 4
🔫QBZ DAZZLING SUN LEVEL 4 
🔫DP JADE DRAGON LEVEL 5 MAX
🔫LADY BUTTERFLY M24 LEVEL 5 MAX
🔫WINTER QUEEN M249 LEVEL 5 MAX
🔫UZI SPIRIT SENTRY LVL 4
🔫MACHETE DRAKONBANE LVL 4
🔫AUG ABYSAAL HOWL LEVEL 2 
🔫AKM CODE BREAKER LEVEL 1
🔫LADY CRIME SKS LVL 1 
🔫KNIGHT DAGGER LVL 1 
🔫GLACIER PAN
💥GRENADE KILL MSG
🔫1 GUN MATERIAL 

#OUTFITS
👗WRATHFUL NEPTUNE SET [ULTIMATE SET]
👗SPECTRAL ADMIRAL SET [ULTIMATE SET]
👗QUEEN OF RICHES SET
👗GODZILLA CARAPACE
👗SEA SERPENT SET
👗THE SEVEN SEAS SET
👗DARK ASSASSIN SET
👗APEACH SET
👗REGAL OVERLOAD SET 
👗OBSIDIAN EAGLE SET 
👗GODZILLA SUIT
👗RYAN SET
👗DAWN GODDESS SET
👗ROUGE SET 
👗VICTIRIAN MAIDEN SET
👗LUCKY MASCOT SET
👗DAYMAN SET
👗BEWITCHING ENCHANTRESS SET
👗LORD OF THE WASTES SET
👗VI SUIT
👗JAYCE SUIT

#SUPER_CARS 
🏎️MCLAREN (ROYAL BLACK) [BORN ISLAND DROP CAR]
🏎️PINK TESLA ROADSTER 
🏎️LAMBORGHINI AVENTADOR SVJ 
🏎️TESLA CYBER TRUCK 
🚘AEGIS LVL 8 MAX
🚘NIGHT EMBER 2 SEAT MOTORCYCLE 
🚘PHANTOM MOTORCYCLE LEVEL 3

🔺HELMET & BACKPACK 🎒 
⛑️PIERCING FANG HELMET 
🎒RAVEN BACKPACK 
🎒GHOSTLY SNARE BACKPACK 
🎒VAMPIRIC COMPULSION BACKPACK 
▫️SPECTRAL ADMIRAL COVER 
▫️REAPER AND COVER 

WATCH VIDEO FOR MORE INFO 📸 

🧷LOGIN - TWITTER + GMAIL`
    },
    {
        id: 2,
        name: "PREMIUM PHAROH MAX WITH FOOL MAX WITH SUPER CARS",
        price: 39.99,
        images: [
            "./assets/images2.jpg",
            "./assets/images3.jpg"
        ],
        video: "./assets/video2.MP4",
        description: `🇮🇳 BGMI PREMIUM PHAROH MAX WITH FOOL MAX & TIDAL MAX WITH SUPERCAR SHOWROOM AND INVENTORY ACCOUNT 🇮🇳

▫️ACCOUNT LEVEL 76/100 [ HIGH ]
▫️MYTHIC FASHION 110/300
▫️COLLECTION LEVEL 65/95 [ HIGH ]
▫️ULTIMATE FASHION 3/5
▫️S5 PONY UNLOCKED
▫️ALL PROFILE SLOTS UNLOCKED
▫️C4S11 CONQUEROR [ F/T ]
▫️DYNAMO MYTHIC VOICE
▫️3X BASIC VOICE

💥SEABED PALACE MYTHIC LOBBY [ ANIMATED ]
💥POSEIDON TRIDENT MYTHIC LOBBY

🔥12M+ RED POPULARITY [ MYTHIC ]
    [ #1000 in total ranking ]

💫PHARAOH X-SUIT LEVEL - 6 MAXX
                 • ITEMS UNLOCK •  
       [FRAME, BAG, ORNA, PARACHUTE]

💫MARMORIS X-SUIT LEVEL - 4
                 • ITEMS UNLOCK •  
       [FRAME, BAG, ORNA, PARACHUTE]

💫GALADRIA X-SUIT LEVEL - 2
                 • ITEMS UNLOCK •  
       [FRAME, BAG, ORNA, PARACHUTE]

#GUNLAB
🔫M416 EMBRACE TIDAL LEVEL 7 MAX
🔫M416 FOOL LEVEL 7 MAX
🔫AKM DESERT FOSSIL LEVEL 4
🔫UMP45 - EMP LEVEL 4
🔫AUG FORSAKEN GLACE LEVEL 4
🔫GROZA PRIMORDIAL LEVEL 4
🔫UZI ETH EMBLEM LEVEL 4
🔫M24 PHARAOH MIGHT LEVEL 4
🔫PAN ACCOLADE LEVEL 4
🔫UMP PLAT RIPPER LEVEL 4
🔫SLR SEA MELODY LEVEL 4
🔫M24 LADY BUTTERFLY LEVEL 4
🔫UMP EVOLUTION LEVEL 4
🔫MACHETE BONE LEVEL 4
🔫GLAZE NADE KILL MSG
🔫FORSAKEN MOLLY KILL MSG
🔫LUMINA MOLLY KILL MSG
🔫SCARL SERENE LUMINA LEVEL 2
🔫ACE32 MYSTIC KRAKEN LEVEL 1
🔫M24 INDUSTRY EDGE LEVEL 1
🔫MG3 SKY HUNTRESS LEVEL 1
🔫MINI14 ICICLE LEVEL 1
🔫EXTRA MATERIALS + PAINTS

#MYTHIC_OUTFITS
👗STARSEA ADMIRAL FULL SET [ ULTIMATE ]
👗SPECTRAL ADMIRAL COVER [ ULTIMATE ]
👗DYSTOPIAN SET [ RAREST ]
👗WEDDING TUXEDO [ RARE ]
👗KILLING MACHINE SET [ RARE ]
👗SEA SERPENT SET [ RARE ]
👗REGAL OVERLOAD SET [ RARE ]
👗WINTER GUARDIAN SET [ RARE ]
👗CYBER MONKEY SET [ RARE ]
👗FALLEN SPIRIT SET [ RARE ]
👗GALACTIC MARSHAL SET [ RARE ]
👗QUICKSAND DOMINTOR SET [ RARE ]
👗SKY EXPLORER SET [ RARE ]
👗RIPPLING CHARM SET [ RARE ]
👗THE FOOL SET [ RARE ]
👗WARRIOR OF RA SET [ RARE ]
👗WARRIOR OF NUT SET [ RARE ]
👗BLUE PILOT SET [ RARE ]
👗SWIFT LEOPARD SET [ RARE ]
👗WAVE WHISPERER SET
👗PINK BIKINI SET
👗MILKMAID SET
👗NIGHT MAIDEN SET
👗JINX, VI & JAYCE SET
👗THE SEVEN SEAS SET
👗NINJA KITTY SET
👗MEGUMI FUSHIGURO SET
👗CRYSTAL BANDIT SET
👗NOBARA KUGISAKI SET
👗PURPLE HALO SET

#HELMET_AND_BACKPACKS
⛑️GALADRIA HELMET [ MYTHIC ]
⛑️RIPPLING CHARM HELMET [ RARE ]
🎒PHARAOH BAG [ MYTHIC ]
🎒BLING BAG [ MYTHIC ]
🎒FOOL BAG [ RARE ]
🎒GALADRIA & MARMORIS BAG [ MYTHIC ]
🎒ANGEL WINGS BAG

#SUPERCARS_VEHICLES
🏎️BUGATTI LA VOITURE NOIRE (ALLOY)
🏎️LAMBORGHINI ESTOQUE METAL GREY DACIA
🏎️LAMBORGHINI URUS GIALLO INTI UAZ
🏎️LOVERS GRACE MYTHIC BUGGY [ ANIMATED ]
🏎️SERENE LUMINA DACIA [ MYTHIC ]
🏎️SEA WRATH MONSTER TRUCK LEVEL - 1
🏎️FLORAL RED DACIA [ RARE ]
🏎️WHITE DRAGON UAZ
🏎️PMGC 2021 UAZ
🏎️GLACIAL BRIDE BIKE

🧷LOGIN - TWITTER/GMAIL`
    },
    {
        id: 3,
        name: "PREMIUM BGMI ACCOUNT WITH SILVANUS XSUIT & BENTLEY SHOWROOM",
        price: 49.99,
        images: [
            "./assets/images1.jpg",
            "./assets/images2.jpg"
        ],
        video: "./assets/video3.MP4",
        description: `❤‍🔥 BGMI PREMIUM ACCOUNT 2 XSUITS + SILVANUS XSUIT LVL 4 + M416 GLACIER MAX + UMP GLACIER COMBO + 22 UPGRADEABLE + BENTLEY SHOWROOM + 4 SUPERCARS ❤‍🔥

▫️ ID LVL - 70 HIGH 
▫️ ALL VEHICLE SLOT OPEN
▫️ SHER,KITTY,DOOGY & FALCON BUDDY
▫️ RANVEER BASIC VOICEPACK 
▫️ GOLDY,SMR,REGA BASIC VOICEPACK 
▫️ BULMA MYTHIC VOICEPACK

💫 SILVANUS XSUIT LVL 4 
💫 IGNIS XSUIT LVL 1 

#RP_MYTHIC 
💓 A1 TO A7 RP MAX SHOWROOM
💓 TOTAL MYTHIC 46/50

#GUNLAB
🔫M416 GLACIER MAX 
🔫AKM DECISIVE LVL 5 
🔫LUMINOUS M762 LVL 4 
🔫UMP GLACIER LVL 4
🔫SERPENGLEM AWM LVL 4 
🔫ETHERNAL UMP LVL 4 
🔫CRIMSON SCARL LVL 4
🔫VIOLET THOMSAN LVL 4 
🔫KITTY KAR98 LVL 4 
🔫PANTHERE DBS LVL 4
🔫UMP MARINE LVL 4
🔫SPYFAMILY STILLETOS LVL 2
🔫BUNNY AKM LVL 1 
🔫DHAMAKEDAAR DP28 LVL 1
🔫NIGHTSCAPE PPBIZON LVL 1
🔫ORIGIN LUMEN FAMAS LVL 1
🔫SCORCHING AMR LVL 1 
🔫LUSTER PAN LVL 1
🔫SHEHRON DP28 LVL 1 
🔫CROSSBOW LVL 1 
🔫MACHEYE LVL 1 
🔫LADY CARMINE SKS LVL 1 
▫️1 MATERIAL 
▫️7 GRENADES

#OUTFIT 
👚GLACIER SET 
👚CYCLE 4/5/6 SET 
👚RS DARK STEALTH 
👚SWAGGY BABA SET 
👚DRAGON EMPEROR SET
👚SPYFAMILY TWLIGHT SET 
👚SUAVE ROYAL SET 
👚FELINE FRIGHTER SET 
👚THE MUMBAIKAR SET
👚FLOWER MAESTRO SET 
👚SWEET BUNNY SET 
👚FOREST WHISPER SET 
👚S2 WANDERER SET & MANY MORE 

#CHARACTERS 
💂VICTOR 

#SUPERCAR 
🚗BENTLEY FLYING SPUR MULLINER 
✨[DAMSON OVER SILVER]✨
🚗BENTLEY CONTINENTAL MULLINER
✨[TANZANITE PURPLE]✨
🚗BENTLEY BATUR 
✨[BONNEVILLA PEARLSCENT]✨
🚗SSC TUATRA SKY CRANE 
✨[WHITE]✨

🔺HELMET,BAGPACK & EXTRA🔺
🌟SERPENGLEM BAGPACK 
🌟CRIMSON NEMESIS BAGPACK 
🌟POSIDION PARACHUTE
🌟FRIGHT NIGHT HOOD

REST CHECK VIDEO 🎥

🔐LOGIN - FB & TWITTER`
    },
    {
        id: 4,
        name: "GLACIER MAX WITH AKM DESERT LEVEL 4 WITH DOUBLE SUPERCARS",
        price: 59.99,
        images: [
            "./assets/image5.jpg",
            "./assets/image6.jpg"
        ],
        video: "./assets/video4.MP4",
        description: `🇮🇳 BGMI PREMIUM ACCOUNT M416 GLACIER MAX + AKM DESERT LVL 4 + 5 PRIMARY KILL-FEED + DOUBLE SUPER CAR + DOUBLE CONQUER + OP INVENTORY 🤍 

▫️ACCOUNT LVL 81/100
▫️C2S4 & C3S7 CONQUER 
▫️GOLDY BASIC VOICE PACK 
▫️2 CAR SLOT OPEN 
▫️FALCON OPEN 

#UPGRADEBLE 
🔫 M416 GLACIER MAX 
🔫 AKM DESERT FOSSIL LVL 4 
🔫 SCAR-L OPERATION LVL 4 
🔫 UMP CARNIVAL LVL 4 
🔫 KAR-98  KULKULKAN LVL 4
🔫 UMP MARINE LVL 2 
🔫 M762 STRAY REBELLION LVL 2 💥 2 MATERIAL AVAILABLE 
💥 56 PAINTS AVAILABLE

#OUTFITS
👗 FIEND HUNTRESS SET 
👗 CYCLE 2 SET 
👗 CONTENDER SET 
👗 CARNIVAL CELEBRATION SET 
👗 CYCLE 4 SET 
👗 MONEY BUSINESS SET 
👗 CYCLE 5 SET 
👗 OPERATION LEO SET 
👗 CYCLE 7 SET
👗 BLACK COMMANDER SET

#SUPER_CARS 
🏎️ LAMBORGHINI SVJ VERDE
(GREEN COUPE) 
🏎️ LAMBORGHINI URUS GIALLO 
(YELLOW UAZ )

🔺 HELMET & BACKPACK 🔺
⛑️ PUBLING MYTHIC HELMET 
⛑️ MAX DRIP HELMET 
🎒 SAILING APE BACKPACK 
🎒 CARDINAL RAIN BACKPACK

WATCH VIDEO FOR MORE INFO  📸 

🧷 LOGIN - TWITTER/GMAIL`
    }
];

// DOM Elements
const productsContainer = document.getElementById('products-container');

// Display products
function displayProducts() {
    const container = document.getElementById('products-container');
    container.innerHTML = '';
    
    products.forEach(product => {
        const card = document.createElement('div');
        card.className = 'product-card';
        
        // Image gallery
        const gallery = document.createElement('div');
        gallery.className = 'image-gallery';
        
        // Main image
        const mainImage = document.createElement('div');
        mainImage.className = 'main-image';
        
        if (product.video) {
            const video = document.createElement('video');
            video.className = 'product-video';
            video.controls = true;
            video.preload = 'metadata';
            video.playsInline = true;
            
            const source = document.createElement('source');
            source.src = product.video;
            source.type = 'video/mp4';
            
            video.appendChild(source);
            mainImage.appendChild(video);
        } else {
            const img = document.createElement('img');
            img.src = product.images[0];
            img.alt = product.name;
            img.className = 'product-image';
            img.onclick = () => showImagePopup(img.src);
            mainImage.appendChild(img);
        }
        
        // Thumbnails
        const thumbnails = document.createElement('div');
        thumbnails.className = 'thumbnail-container';
        
        product.images.forEach((imgSrc, index) => {
            const thumb = document.createElement('img');
            thumb.src = imgSrc;
            thumb.alt = product.name + ' view ' + (index + 1);
            thumb.className = 'thumbnail' + (index === 0 ? ' active' : '');
            thumb.onclick = () => {
                changeMainImage(thumb, imgSrc);
                showImagePopup(imgSrc); // Show popup when thumbnail is clicked
            };
            thumbnails.appendChild(thumb);
        });
        
        gallery.appendChild(mainImage);
        gallery.appendChild(thumbnails);
        
        // Product info
        const info = document.createElement('div');
        info.className = 'product-info';
        
        // Title
        const title = document.createElement('h3');
        title.className = 'product-title';
        title.textContent = product.name;
        
        // Price
        const price = document.createElement('p');
        price.className = 'product-price';
        price.textContent = '₹' + product.price.toFixed(2);
        
        // Description
        const description = document.createElement('div');
        description.className = 'product-description';
        description.innerHTML = product.description.replace(/\n/g, '<br>');
        
        // WhatsApp link
        const whatsappLink = document.createElement('a');
        whatsappLink.href = 'https://wa.me/919667213967?text=' + encodeURIComponent('Hi, I\'m interested in ' + product.name + ' (₹' + product.price.toFixed(2) + '). Please provide more details.');
        whatsappLink.className = 'whatsapp-link';
        whatsappLink.target = '_blank';
        whatsappLink.rel = 'noopener noreferrer';
        whatsappLink.innerHTML = '<i class="fab fa-whatsapp"></i> Contact on WhatsApp';
        
        // Telegram link
        const telegramLink = document.createElement('a');
        telegramLink.href = 'https://t.me/evilpaanda';
        telegramLink.className = 'telegram-link';
        telegramLink.target = '_blank';
        telegramLink.rel = 'noopener noreferrer';
        telegramLink.innerHTML = '<i class="fab fa-telegram"></i> Contact on Telegram';
        
        info.appendChild(title);
        info.appendChild(price);
        info.appendChild(description);
        info.appendChild(whatsappLink);
        info.appendChild(telegramLink);
        
        card.appendChild(gallery);
        card.appendChild(info);
        container.appendChild(card);
    });
}

// Function to change main image
function changeMainImage(thumbnail, newSrc) {
    const mainImage = thumbnail.parentElement.previousElementSibling.querySelector('img');
    if (mainImage) {
        mainImage.src = newSrc;
        mainImage.onclick = () => showImagePopup(newSrc); // Add click handler to new main image
    }
    
    // Update active thumbnail
    thumbnail.parentElement.querySelectorAll('.thumbnail').forEach(thumb => {
        thumb.classList.remove('active');
    });
    thumbnail.classList.add('active');
}

// Function to show image popup
function showImagePopup(imageSrc) {
    const modal = document.createElement('div');
    modal.className = 'image-popup-modal';
    
    const closeBtn = document.createElement('span');
    closeBtn.className = 'image-popup-close';
    closeBtn.innerHTML = '&times;';
    closeBtn.onclick = () => modal.remove();
    
    const img = document.createElement('img');
    img.src = imageSrc;
    img.className = 'image-popup-content';
    
    modal.appendChild(closeBtn);
    modal.appendChild(img);
    
    modal.onclick = (e) => {
        if (e.target === modal) {
            modal.remove();
        }
    };
    
    document.body.appendChild(modal);
    modal.style.display = 'block';
}

// Initialize the page
displayProducts();

// Search functionality
const searchInput = document.getElementById('searchInput');
const searchButton = document.querySelector('.search-button');

function filterProducts(searchTerm) {
    const filteredProducts = products.filter(product => {
        const searchString = searchTerm.toLowerCase();
        
        // Check if the search term contains a price range
        const priceRangeMatch = searchString.match(/(\d+)\s*-\s*(\d+)/);
        if (priceRangeMatch) {
            const minPrice = parseFloat(priceRangeMatch[1]);
            const maxPrice = parseFloat(priceRangeMatch[2]);
            return product.price >= minPrice && product.price <= maxPrice;
        }
        
        // Check if the search term contains "under" or "below" with a price
        const underPriceMatch = searchString.match(/(?:under|below)\s*(\d+)/);
        if (underPriceMatch) {
            const maxPrice = parseFloat(underPriceMatch[1]);
            return product.price <= maxPrice;
        }
        
        // Check if the search term contains "over" or "above" with a price
        const overPriceMatch = searchString.match(/(?:over|above)\s*(\d+)/);
        if (overPriceMatch) {
            const minPrice = parseFloat(overPriceMatch[1]);
            return product.price >= minPrice;
        }
        
        // Regular search for text
        return (
            product.name.toLowerCase().includes(searchString) ||
            product.description.toLowerCase().includes(searchString) ||
            product.price.toString().includes(searchString)
        );
    });
    
    displayFilteredProducts(filteredProducts);
}

function displayFilteredProducts(filteredProducts) {
    if (filteredProducts.length === 0) {
        productsContainer.innerHTML = `
            <div class="no-results">
                <h2>No products found</h2>
                <p>Try different keywords or check out all our products</p>
            </div>
        `;
        return;
    }

    productsContainer.innerHTML = filteredProducts.map(product => `
        <div class="product-card">
            ${product.images ? `
                <div class="image-gallery">
                    <div class="main-image">
                        ${product.video ? `
                            <video class="product-video" controls preload="metadata" playsinline>
                                <source src="${product.video}" type="video/mp4">
                                Your browser does not support the video tag.
                            </video>
                        ` : `
                            <img src="${product.images[0]}" alt="${product.name}" class="product-image">
                        `}
                    </div>
                    <div class="thumbnail-container">
                        ${product.images.map((img, index) => `
                            <img src="${img}" alt="${product.name} view ${index + 1}" 
                                 class="thumbnail ${index === 0 ? 'active' : ''}"
                                 onclick="changeMainImage(this, '${img}')">
                        `).join('')}
                    </div>
                </div>
            ` : `
                <img src="${product.image}" alt="${product.name}" class="product-image">
            `}
            <div class="product-info">
                <h3 class="product-title">${product.name}</h3>
                <p class="product-price">₹${product.price.toFixed(2)}</p>
                <div class="product-description">
                    ${product.description.replace(/\n/g, '<br>')}
                </div>
                <a href="https://wa.me/919667213967?text=${encodeURIComponent(`Hi, I'm interested in ${product.name} (₹${product.price.toFixed(2)}). Please provide more details.`)}" 
                   class="whatsapp-link" 
                   target="_blank"
                   rel="noopener noreferrer">
                    <i class="fab fa-whatsapp"></i> Contact on WhatsApp
                </a>
                <a href="https://t.me/evilpaanda" 
                   class="telegram-link" 
                   target="_blank"
                   rel="noopener noreferrer">
                    <i class="fab fa-telegram"></i> Contact on Telegram
                </a>
            </div>
        </div>
    `).join('');
}

// Search event listeners
searchButton.addEventListener('click', () => {
    filterProducts(searchInput.value);
});

searchInput.addEventListener('keypress', (e) => {
    if (e.key === 'Enter') {
        filterProducts(searchInput.value);
    }
});

// Real-time search as user types
searchInput.addEventListener('input', () => {
    filterProducts(searchInput.value);
});

// Update the search input placeholder to show price range examples
searchInput.placeholder = "Search products... (e.g., 'under 30', '20-40', 'over 50')";

// Add click event listeners to all product images
document.addEventListener('click', (e) => {
    if (e.target.classList.contains('product-image')) {
        showImagePopup(e.target.src);
    }
}); 